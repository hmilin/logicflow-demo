var t,e,i,s,o,n,r=Object.defineProperty,a=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!=typeof e?e+"":e,i),i);import{d as l,o as h,c as d,w as c,u as p,_ as u,a as g,z as m,r as v,b as w,e as f,F as y,f as x,I as M,l as C,g as S,t as P,D as E,E as k,h as b,i as L,j as D,k as T,M as N,m as $,n as H,p as A,q as I,S as V,s as _,L as O,v as G,x as R,y as W,A as Z,B as F,C as B,G as j,H as K}from"./vendor-6c7f889b.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const z=l({__name:"App",setup:t=>(t,e)=>{const i=v("router-view"),s=u;return h(),d(s,{locale:p(m)},{default:c((()=>[g(i)])),_:1},8,["locale"])}}),X=w({scriptUrl:"/assets/iconfont-b972c000.js"}),Y=(t,e)=>{const i=t.__vccOpts||t;for(const[s,o]of e)i[s]=o;return i},U={class:"flow-controls"},q=["title"];const J=Y({props:{lf:Object},data(){return{menus:[{icon:"icon-fullscreen",onClick:this.autoLayout,title:"自动布局"},{icon:"icon-fullscreenexit",onClick:this.reSet,title:"适应"},{icon:"icon-zoomin",onClick:this.processZoomIn,title:"放大"},{icon:"icon-zoomout",onClick:this.processZoomOut,title:"缩小"},{icon:"icon-selection",onClick:this.openSelection,title:"选区"}]}},methods:{reSet(){this.lf.resetZoom()},processZoomIn(){this.lf.zoom(!0)},processZoomOut(){this.lf.zoom(!1)},autoLayout(){var t;null==(t=this.lf.extension.layout)||t.autoLayout()},openSelection(){this.lf.extension.selectionSelect.openSelectionSelect(),this.lf.once("selection:selected",(()=>{this.lf.extension.selectionSelect.closeSelectionSelect()}))}}},[["render",function(t,e,i,s,o,n){const r=v("Icon");return h(),f("div",U,[(h(!0),f(y,null,x(o.menus,(t=>(h(),f("a",{key:t.title,title:t.title},[g(r,{class:"icon",type:t.icon,onClick:t.onClick},null,8,["type","onClick"])],8,q)))),128))])}],["__scopeId","data-v-140e036b"]]),Q={stroke:"#613EEA",strokeWidth:1},tt={rect:{...Q},circle:{r:40,...Q},diamond:{...Q,rx:40,ry:40},polygon:{...Q,rx:100,ry:100},polyline:{...Q,selectedStroke:"#613EEA",hoverStroke:"#613EEA"},bezier:{...Q,selectedStroke:"#613EEA",hoverStroke:"#613EEA"},anchor:{fill:"#D0D0D0",stroke:"none",hoverStroke:"#613EEA"},edgeText:{fontSize:12,color:"transparent"},arrow:{offset:8,verticalLength:4},outline:{fill:"none",strokeWidth:0}};var et=(t=>(t.Start="0",t.End="1",t.ServiceTask="2",t.ExclusiveGateway="3",t.UserTask="4",t.ScriptTask="5",t.Flow="sequenceFlow",t))(et||{});function it(t,e){return`${t.substring(0,e)}${t.length>e?"...":""}`}function st(t){return`${it((null==t?void 0:t.name)||"",20)}${(null==t?void 0:t.displayName)?`-${it(t.displayName,20)}`:""}`}const ot={0:{width:60,height:60},1:{width:64,height:64},4:{width:280,height:148},2:{width:280,height:148},3:{width:280,height:148},5:{width:280,height:148},sequenceFlow:{width:0,height:1}},nt=60,rt=60,at={0:"Event",1:"Event",2:"Activity",3:"Gateway",5:"Activity",4:"Activity",sequenceFlow:"Flow"},lt=new M([32,32,1]);function ht(){return lt.next()}function dt(t={}){const e={isShowAnchor:!0,...t};return function(t){return class extends t{initNodeData(t){super.initNodeData(t)}setIsShowAnchor(){this.isShowAnchor=e.isShowAnchor}getConnectedSourceRules(){const t=super.getConnectedSourceRules();return t.push({message:"",validate:(t,e)=>(null==t?void 0:t.id)!==(null==e?void 0:e.id)}),t.push({message:"左连接点只能作为终点",validate:(t,e,i)=>!ct(null==i?void 0:i.id)}),t.push({message:"一个连接点只能有一条连线",validate:(t,e,i)=>!this.graphModel.edges.find((t=>t.sourceAnchorId===(null==i?void 0:i.id)))}),t}getConnectedTargetRules(){const t=super.getConnectedTargetRules();return t.push({message:"右连接点只能作为起点",validate:(t,e,i,s)=>ct(null==s?void 0:s.id)}),t.push({message:"一个连接点只能有一条连线",validate:(t,e,i,s)=>!this.graphModel.edges.find((t=>t.targetAnchorId===(null==s?void 0:s.id)))}),t}}}}function ct(t){return(null==t?void 0:t.endsWith("left"))??!1}var pt=Object.defineProperty,ut=Object.getOwnPropertyDescriptor;const gt=ot[et.End].width/2;let mt=(t=class extends C.CircleNodeModel{constructor(t,e){t.id||(t.id=`${at[et.End]}_${ht()}`),super(t,e),this.setIsShowAnchor()}getConnectedSourceRules(){const t=super.getConnectedSourceRules();return t.push({message:"结束节点不能作为连线的起点",validate:()=>!1}),t}setAttributes(){this.r=gt}getDefaultAnchor(){const{x:t,y:e,width:i,id:s}=this;return[{x:t-i/2,y:e,id:`${s}_left`}]}},a(t,"extendKey","EndEventModel"),t);mt=((t,e,i,s)=>{for(var o,n=s>1?void 0:s?ut(e,i):e,r=t.length-1;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&pt(e,i,n),n})([dt()],mt);class vt extends C.CircleNode{getShape(){const t=this.props.model,{x:e,y:i}=t,{strokeWidth:s,fill:o}=t.getNodeStyle(),n=C.h("svg",{x:e-30+18,y:i-30+18,width:25,height:25,viewBox:"0 0 22 22"},C.h("rect",{fill:this.props.model.getNodeStyle().stroke,width:20,height:20}));return C.h("g",{class:"node-filter"},[C.h("circle",{cx:e,cy:i,fill:o,stroke:"rgba(0, 0, 0, 0.15)",strokeWidth:s,r:gt}),n])}}a(vt,"extendKey","EndEventView");const wt={type:et.End,view:vt,model:mt};var ft=Object.defineProperty,yt=Object.getOwnPropertyDescriptor;let xt=(e=class extends C.RectNodeModel{constructor(t,e){t.id||(t.id=`${at[et.Start]}_${ht()}`),t.text||(t.text=""),super(t,e),this.setIsShowAnchor()}getConnectedTargetRules(){const t=super.getConnectedTargetRules();return t.push({message:"起始节点不能作为连线的终点",validate:()=>!1}),t}setAttributes(){this.width=ot[et.Start].width,this.height=ot[et.Start].height}getDefaultAnchor(){const{x:t,y:e,width:i,id:s}=this;return[{x:t+i/2,y:e,id:`${s}_right`}]}getNodeStyle(){const t=super.getNodeStyle();return t.filter="drop-shadow(16px 16px 10px black)",t}},a(e,"extendKey","StartEventModel"),e);xt=((t,e,i,s)=>{for(var o,n=s>1?void 0:s?yt(e,i):e,r=t.length-1;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ft(e,i,n),n})([dt()],xt);class Mt extends C.RectNode{getLabelShape(){const t=this.props.model,{x:e,y:i,width:s,height:o}=t,{stroke:n}=t.getNodeStyle();return C.h("svg",{x:e-s/2+15,y:i-o/2+15,width:30,height:30,viewBox:"0 0 21 30"},C.h("path",{fill:n,d:"M0 27.0725V2.92754C0 1.29297 1.85441 0.348658 3.17634 1.31007L19.776 13.3825C20.8742 14.1812 20.8742 15.8188 19.776 16.6175L3.17634 28.6899C1.8544 29.6513 0 28.707 0 27.0725Z"}))}getShape(){const t=this.props.model,{x:e,y:i,width:s,height:o}=t,{strokeWidth:n,fill:r}=t.getNodeStyle();return C.h("g",{class:"node-filter"},[C.h("rect",{x:e-s/2,y:i-o/2,rx:8,ry:8,fill:r,stroke:"rgba(0, 0, 0, 0.15)",strokeWidth:n,width:s,height:o}),this.getLabelShape()])}getStateClassName(){return`${super.getStateClassName()} start-node`}}a(Mt,"extendKey","StartEventNode");const Ct={type:et.Start,view:Mt,model:xt},St="#D0D0D0",Pt="#D1BDFF";class Et extends C.PolylineEdgeModel{constructor(t,e){t.id||(t.id=`${at[et.Flow]}_${ht()}`),super(t,e)}getEdgeStyle(){const t=super.getEdgeStyle();return this.isSelected||this.isHovered?(t.strokeWidth=3,t.stroke=Pt):(t.strokeWidth=1,t.stroke=St),t.cursor="pointer",t}setAttributes(){this.isAnimation=!0}getEdgeAnimationStyle(){const t=super.getEdgeAnimationStyle();return this.isSelected||this.isHovered?(t.animationName="edge-selected",t.stroke=Pt):(t.animationName="edge-blur",t.stroke=St),t.strokeDasharray="none",t.animationDuration="0.3s",t.animationDirection="normal",t.animationIterationCount="1",t}getData(){const t=super.getData();return t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId,t}initEdgeData(t){const{x:e,y:i}=t.endPoint;t.endPoint={x:e-2,y:i},t.pointsList&&(t.pointsList[t.pointsList.length-1]=t.endPoint),super.initEdgeData(t)}}a(Et,"extendKey","SequenceFlowModel");class kt extends C.PolylineEdge{constructor(){super()}getEdge(){return super.getEdge()}}a(kt,"extendKey","BezierEdge");const bt={type:et.Flow,view:kt,model:Et},Lt={class:"node-card"},Dt={class:"node-card-header"},Tt={class:"node-card-title"},Nt={class:"node-card-body"},$t={class:"node-card-content"},Ht={class:"node-card-action"},At=l({__name:"NodeCard",props:{properties:null,type:null,text:null},emits:["edit","delete","clone"],setup(t,{emit:e}){const i=t;return(t,s)=>{const o=T,n=N,r=E;return h(),f("div",Lt,[S("div",Dt,[g(p(X),{type:i.properties.icon,style:{fontSize:"20px"}},null,8,["type"]),S("div",Tt,P(i.text),1),S("a",{onClick:s[0]||(s[0]=t=>e("edit"))},[g(p(k))])]),S("div",Nt,[S("div",$t,P(i.properties.description),1),S("div",Ht,[g(r,null,{overlay:c((()=>[g(n,null,{default:c((()=>[g(o,{key:"delete",onClick:s[2]||(s[2]=t=>e("delete"))},{default:c((()=>[b("删除")])),_:1}),g(o,{key:"clone",onClick:s[3]||(s[3]=t=>e("clone"))},{default:c((()=>[b("复制")])),_:1})])),_:1})])),default:c((()=>[g(p(L),{style:{fontSize:"24px"},onClick:s[1]||(s[1]=D((()=>{}),["prevent"]))})])),_:1})])])])}}});class It extends C.HtmlNode{constructor(t){super(t),a(this,"isMounted",!1),a(this,"vnode"),a(this,"app"),this.isMounted=!1,this.vnode=$(At,{properties:t.model.getProperties(),text:st(t.model.getProperties()),type:t.model.getData().type,onEdit:()=>{},onDelete:()=>{t.graphModel.deleteNode(t.model.getData().id)},onClone:()=>{const e=t.graphModel.cloneNode(this.props.model.id);t.graphModel.getNodeModelById(e.id).setProperties({...e.properties,name:`${e.properties.name}_copy`})}}),this.app=H({render:()=>this.vnode})}get title(){return st(this.props.model.getProperties())}setHtml(t){var e;if(this.isMounted)this.vnode.component.props.properties=this.props.model.getProperties(),this.vnode.component.props.text=this.title;else{this.isMounted=!0,t.parentElement.setAttribute("class","node-filter");const i=document.createElement("div");i.style.width=`${this.props.model.width}px`,i.style.height=`${this.props.model.height}px`,t.appendChild(i),null==(e=this.app)||e.mount(i)}}}var Vt=Object.defineProperty,_t=Object.getOwnPropertyDescriptor;const Ot=(t,e,i,s,o)=>[{x:Math.round(t-i/2),y:e,id:`${o}_left`},{x:Math.round(t+i/2),y:Math.round(e-s/6),id:`${o}_true`,text:"true"},{x:Math.round(t+i/2),y:Math.round(e+s/6),id:`${o}_false`,text:"false"}];let Gt=(i=class extends C.RectNodeModel{constructor(t,e){t.id||(t.id=`${at[et.ExclusiveGateway]}_${ht()}`),t.text||(t.text=""),super(t,e),this.setIsShowAnchor()}setAttributes(){this.width=ot[et.ExclusiveGateway].width,this.height=ot[et.ExclusiveGateway].height}getDefaultAnchor(){const{width:t,height:e,x:i,y:s,id:o}=this;return Ot(i,s,t,e,o)}},a(i,"extendKey","ExclusiveGatewayModel"),i);Gt=((t,e,i,s)=>{for(var o,n=s>1?void 0:s?_t(e,i):e,r=t.length-1;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Vt(e,i,n),n})([dt()],Gt);class Rt extends It{setHtml(t){super.setHtml(t);const e=document.createDocumentFragment();t.style.position="relactive",t.style.overflow="visible";const{x:i,y:s,width:o,height:n}=this.props.model;this.props.model.anchors.forEach((t=>{const r=document.createElement("span");r.style.color="rgba(0, 0, 0, 0.65)",r.style.position="absolute",r.style.left=`${Math.round(t.x-i+o/2+4)}px`,r.style.top=`${Math.round(t.y-s+n/2-8)}px`,t.text&&(r.append(t.text),e.appendChild(r))})),t.appendChild(e)}}a(Rt,"extendKey","ExclusiveGatewayNode");const Wt={type:et.ExclusiveGateway,view:Rt,model:Gt};var Zt=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor;let Bt=(s=class extends C.RectNodeModel{constructor(t,e){t.id||(t.id=`${at[et.ScriptTask]}_${ht()}`),super(t,e),this.setIsShowAnchor()}setAttributes(){this.width=ot[et.ScriptTask].width,this.height=ot[et.ScriptTask].height}getDefaultAnchor(){const{x:t,y:e,width:i,id:s}=this;return[{x:t-i/2,y:e,id:`${s}_left`},{x:t+i/2,y:e,id:`${s}_right`}]}},a(s,"extendKey","ServiceTaskModel"),s);Bt=((t,e,i,s)=>{for(var o,n=s>1?void 0:s?Ft(e,i):e,r=t.length-1;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Zt(e,i,n),n})([dt()],Bt);class jt extends It{}a(jt,"extendKey","ServiceTaskNode");const Kt={type:et.ScriptTask,view:jt,model:Bt};var zt=Object.defineProperty,Xt=Object.getOwnPropertyDescriptor;let Yt=(o=class extends C.RectNodeModel{constructor(t,e){t.id||(t.id=`${at[et.ServiceTask]}_${ht()}`),super(t,e),this.setIsShowAnchor()}setAttributes(){this.width=ot[et.ServiceTask].width,this.height=ot[et.ServiceTask].height}getDefaultAnchor(){const{x:t,y:e,width:i,id:s}=this;return[{x:t-i/2,y:e,id:`${s}_left`},{x:t+i/2,y:e,id:`${s}_right`}]}},a(o,"extendKey","ServiceTaskModel"),o);Yt=((t,e,i,s)=>{for(var o,n=s>1?void 0:s?Xt(e,i):e,r=t.length-1;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&zt(e,i,n),n})([dt()],Yt);class Ut extends It{}a(Ut,"extendKey","ServiceTaskNode");const qt={type:et.ServiceTask,view:Ut,model:Yt};var Jt=Object.defineProperty,Qt=Object.getOwnPropertyDescriptor;let te=(n=class extends C.RectNodeModel{constructor(t,e){t.id||(t.id=`${at[et.UserTask]}_${ht()}`),super(t,e),this.setIsShowAnchor()}setAttributes(){this.width=ot[et.UserTask].width,this.height=ot[et.UserTask].height}getDefaultAnchor(){const{x:t,y:e,width:i,id:s}=this;return[{x:t-i/2,y:e,id:`${s}_left`},{x:t+i/2,y:e,id:`${s}_right`}]}},a(n,"extendKey","UserTaskModel"),n);te=((t,e,i,s)=>{for(var o,n=s>1?void 0:s?Qt(e,i):e,r=t.length-1;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Jt(e,i,n),n})([dt()],te);class ee extends It{}a(ee,"extendKey","UserTaskNode");const ie={type:et.UserTask,view:ee,model:te};class se{constructor({lf:t}){t.setTheme(tt),t.register(Ct),t.register(wt),t.register(Wt),t.register(qt),t.register(ie),t.register(Kt),t.options.customBpmnEdge||(t.register(bt),t.setDefaultEdgeType(et.Flow))}}a(se,"pluginName","BpmnElement");const oe=({sourceX:t,sourceY:e,targetX:i,targetY:s})=>{const o=Math.abs(i-t)/2,n=i<t?i+o:i-o,r=Math.abs(s-e)/2;return[n,s<e?s+r:s-r]};function ne(t){const e=[...t],i=[];let s=null;const o=[];for(;e.length;){const t=e.shift();if(t)if(i.length){let n=!1;const r=i[0],a=re(r.x,r.y,t.x,t.y);if(null===s||a===s?(s=a,i.push(t)):n=!0,!n&&e.length)continue;const l=i.shift();l&&o.push(l);const h=i.pop();h&&o.push(h),i.length=0,n&&(e.length?i.push(t):o.push(t)),n=!1,s=null}else i.push(t)}return o}const re=(t,e,i,s)=>(s-e)/(i-t);class ae{constructor({lf:t}){a(this,"menuDOM"),a(this,"lf"),a(this,"toolOverlay"),a(this,"_activeData"),a(this,"commonMenuItems"),a(this,"isShow",!1),a(this,"listenDelete",(()=>{this.hideMenu()})),this.lf=t,this.lf.setEdgeMenuItems=t=>{this.setEdgeMenuItems(t)},this.lf.hideContextMenu=()=>{this.hideMenu()}}setEdgeMenuItems(t){this.commonMenuItems=t}render(t,e){this.toolOverlay=e,t.on("edge:contextmenu",(({data:t})=>{this._activeData=t,this.createMenu()})),t.on("blank:click",(()=>{this.hideMenu()}))}createMenu(){var t;const e=document.createElement("div");e.setAttribute("class","lf-edge-menu");const i=document.createDocumentFragment();null==(t=this.commonMenuItems)||t.forEach((t=>{const e=document.createElement("div");e.className="lf-edge-menu-item";const s=document.createElement("img");s.src=t.icon,s.className="lf-edge-menu-img",t.className&&(e.className=`${e.className} ${t.className}`),s.addEventListener("click",(()=>{this.hideMenu(),t.callback&&t.callback(this._activeData)})),e.appendChild(s),i.appendChild(e)})),e.innerHTML="",e.appendChild(i),this.menuDOM=e,this.showMenu()}getContextMenuPosition(){const t=this._activeData;if(!t)return[];const e=this.lf.graphModel.getEdgeModelById(t.id);if(!(null==e?void 0:e.pointsList))return[];const i=(t=>{const e=Math.ceil(t.length/2-1);return[t[e],t[e+1]]})(ne(e.pointsList)),[{x:s,y:o},{x:n,y:r}]=i,[a,l]=oe({sourceX:s,sourceY:o,targetX:n,targetY:r}),h="horizontal"===(t=>{const[{x:e,y:i},{x:s,y:o}]=t,n=re(e,i,s,o);return Math.abs(n)>1?"vertical":"horizontal"})(i)?[a,l-10]:[a+10,l];return this.lf.graphModel.transformModel.CanvasPointToHtmlPoint(h)}showMenu(){if(!this.menuDOM)return;const[t,e]=this.getContextMenuPosition();this.menuDOM.style.display="flex",this.menuDOM.style.top=`${e}px`,this.menuDOM.style.left=`${t}px`,this.toolOverlay.appendChild(this.menuDOM)}hideMenu(){this.menuDOM&&(this.menuDOM.innerHTML="",this.menuDOM.style.display="none",this.isShow&&this.toolOverlay.removeChild(this.menuDOM),this.lf.off("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!1)}}a(ae,"pluginName","edgeMenu");class le{constructor({lf:t}){a(this,"extraSpace",40),a(this,"offsetLeft",236),a(this,"offsetTop",140),a(this,"lf"),a(this,"dagreGraph"),this.lf=t}async autoLayout(){this.initDagreGraph(),this.updateLayoutElements(),A.layout(this.dagreGraph),this.updateLogicFlowLayout(),this.lf.resetTranslate()}initDagreGraph(){this.dagreGraph=new A.graphlib.Graph({multigraph:!0}),this.dagreGraph.setDefaultEdgeLabel((()=>({}))),this.dagreGraph.setGraph({rankdir:"LR",marginx:48,marginy:128})}updateLayoutElements(){const{nodes:t,edges:e}=this.lf.getGraphRawData();t.forEach((t=>{var e,i;const s=t.type;this.dagreGraph.setNode(t.id,{width:((null==(e=ot[s])?void 0:e.width)||nt)+this.extraSpace,height:(null==(i=ot[s])?void 0:i.height)||rt})})),e.forEach((t=>{const e=this.getEdgeName(t);this.dagreGraph.setEdge(t.sourceNodeId,t.targetNodeId,{points:t.pointsList},e)}))}updateLogicFlowLayout(){const{nodes:t,edges:e}=this.lf.getGraphRawData();t.forEach((t=>{const e=this.dagreGraph.node(t.id);t.x=e.x,t.y=e.y})),e.forEach((t=>{var e;const i=this.getEdgeName(t),s=this.dagreGraph.edge(t.sourceNodeId,t.targetNodeId,i),o=s.points,n=o.length;if(o[0].x+=0-this.extraSpace/2,o[n-1].x-=0-this.extraSpace/2,null==(e=t.sourceNodeId)?void 0:e.startsWith(at[et.ExclusiveGateway])){const e=this.getGatewayPointStart(t.sourceNodeId,t.sourceAnchorId);e&&(o[0].x=e.x,o[0].y=e.y)}const r=this.dagreGraph.node(t.targetNodeId);if(o[n-1].x=r.x-(r.width-this.extraSpace)/2,o[n-1].y=r.y,t.startPoint=o[0],t.endPoint=o[n-1],t.pointsList=s.points,o.length>2){const e={...o[0]},i={...o[n-1]},s=oe({sourceX:e.x,sourceY:e.y,targetX:i.x,targetY:i.y});t.pointsList=[e,{x:s[0],y:e.y},{x:s[0],y:i.y},i],t.pointsList=ne(t.pointsList)}})),this.lf.renderRawData({nodes:t,edges:e}),this.dagreGraph=null}getEdgeName(t){return`${t.sourceAnchorId}-${t.targetAnchorId}`}getGatewayPointStart(t,e){const i=this.dagreGraph.node(t),s=Ot(i.x,i.y,ot[et.ExclusiveGateway].width,ot[et.ExclusiveGateway].height,t).find((({id:t})=>t===e));if(s)return{x:s.x,y:s.y}}}a(le,"pluginName","layout");const he=function(t){return{type:t,model:class extends C.RectNodeModel{constructor(e,i){e.id||(e.id=`${at[t]}_${ht()}`),e.text||(e.text=""),super(e,i),this.setIsShowAnchor()}setAttributes(){this.width=ot[t].width,this.height=ot[t].height}},view:class extends C.RectNode{}}},de=he(et.Start),ce=he(et.End),pe=he(et.ExclusiveGateway),ue=he(et.ServiceTask),ge=he(et.ScriptTask),me=he(et.UserTask),ve={rect:{fill:"rgb(222, 222, 222)",strokeWidth:2,stroke:"transparent"}};class we{constructor({lf:t}){t.setTheme(ve),t.register(de),t.register(ce),t.register(pe),t.register(ue),t.register(ge),t.register(me)}}a(we,"pluginName","MiniElement");const fe=class{constructor({lf:t,LogicFlow:e,options:i}){a(this,"lf",null),a(this,"container",null),a(this,"miniMapWrap",null),a(this,"miniMapContainer",null),a(this,"lfMap",null),a(this,"viewport",null),a(this,"width",150),a(this,"height",220),a(this,"leftPosition"),a(this,"topPosition"),a(this,"rightPosition"),a(this,"bottomPosition"),a(this,"miniMapWidth",450),a(this,"miniMapHeight",660),a(this,"viewPortTop",0),a(this,"viewPortLeft",0),a(this,"startPosition",null),a(this,"viewPortScale",1),a(this,"viewPortWidth",150),a(this,"viewPortHeight",75),a(this,"resetDataX",0),a(this,"resetDataY",0),a(this,"LogicFlow",null),a(this,"isShow",!1),a(this,"isShowHeader",!0),a(this,"isShowCloseIcon",!0),a(this,"dragging",!1),a(this,"disabledPlugins",["miniMap","control","selectionSelect"]),a(this,"plugins",[]),a(this,"show",((t,e)=>{this.setView(),this.isShow||this.createMiniMap(t,e),this.isShow=!0})),a(this,"hide",(()=>{this.isShow&&this.removeMiniMap(),this.isShow=!1})),a(this,"reset",(()=>{this.lf.resetTranslate(),this.lf.resetZoom(),this.hide(),this.show()})),a(this,"startDrag",(t=>{document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.drop),this.startPosition={x:t.x,y:t.y}})),a(this,"moveViewport",((t,e)=>{const i=this.viewport.style;this.viewPortTop=t,this.viewPortLeft=e,i.top=`${this.viewPortTop}px`,i.left=`${this.viewPortLeft}px`})),a(this,"drag",(t=>{this.dragging=!0;const e=this.viewPortTop+t.y-this.startPosition.y,i=this.viewPortLeft+t.x-this.startPosition.x;this.moveViewport(e,i),this.startPosition={x:t.x,y:t.y};const s=(this.viewPortLeft+this.viewPortWidth/2)/this.viewPortScale,o=(this.viewPortTop+this.viewPortHeight/2)/this.viewPortScale;this.lf.focusOn({coordinate:{x:s+this.resetDataX,y:o+this.resetDataY}})})),a(this,"drop",(()=>{document.removeEventListener("mousemove",this.drag),document.removeEventListener("mouseup",this.drop);let t=this.viewPortTop,e=this.viewPortLeft;this.viewPortLeft>this.width&&(e=this.width-this.viewPortWidth),this.viewPortTop>this.height&&(t=this.height-this.viewPortHeight),this.viewPortLeft<-this.width&&(e=0),this.viewPortTop<-this.height&&(t=0),this.moveViewport(t,e)})),a(this,"mapClick",(t=>{if(this.dragging)this.dragging=!1;else{const{layerX:e,layerY:i}=t,s=e,o=i,n=this.lf.getGraphRawData(),{left:r,top:a}=this.getBounds(n),l=r+s/this.viewPortScale,h=a+o/this.viewPortScale;this.lf.focusOn({coordinate:{x:l,y:h}})}})),this.lf=t,i&&i.MiniMap&&this.setOption(i),this.miniMapWidth=t.graphModel.width,this.miniMapHeight=t.graphModel.width*this.height/this.width,this.LogicFlow=e,this.initMiniMap()}render(t,e){this.container=e,this.lf.on("history:change",(()=>{this.isShow&&this.setView()})),this.lf.on("graph:transform",I((()=>{this.isShow&&!this.dragging&&this.setView()}),300))}init(t){this.disabledPlugins=this.disabledPlugins.concat(t.disabledPlugins||[]),this.plugins=this.plugins.concat(t.plugins||[])}setOption(t){const{width:e=150,height:i=220,isShowHeader:s=!0,isShowCloseIcon:o=!0,leftPosition:n=0,topPosition:r=0,rightPosition:a,bottomPosition:l}=t.MiniMap;this.width=e,this.height=i,this.isShowHeader=s,this.isShowCloseIcon=o,this.viewPortWidth=e,this.leftPosition=n,this.topPosition=r,this.rightPosition=a,this.bottomPosition=l,this.init(t.MiniMap)}initMiniMap(){const t=document.createElement("div");t.className="lf-mini-map-graph",t.style.width=`${this.width+4}px`,t.style.height=`${this.height}px`,this.lfMap=new this.LogicFlow({container:t,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,plugins:this.plugins,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=t=>t,this.lfMap.adapterOut=t=>t,this.miniMapWrap=t,this.createViewPort(),t.addEventListener("click",this.mapClick)}createMiniMap(t,e){const i=document.createElement("div");i.appendChild(this.miniMapWrap),void 0!==t||void 0!==e?(i.style.left=`${t||0}px`,i.style.top=`${e||0}px`):(void 0!==this.rightPosition?i.style.right=`${this.rightPosition}px`:void 0!==this.leftPosition&&(i.style.left=`${this.leftPosition}px`),void 0!==this.bottomPosition?i.style.bottom=`${this.bottomPosition}px`:void 0!==this.topPosition&&(i.style.top=`${this.topPosition}px`)),i.style.position="absolute",i.className="lf-mini-map",this.isShowCloseIcon||i.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||i.classList.add("lf-mini-map-no-header"),this.container.appendChild(i),this.miniMapWrap.appendChild(this.viewport);const s=document.createElement("div");s.className="lf-mini-map-header",s.innerText=fe.headerTitle,i.appendChild(s);const o=document.createElement("span");o.className="lf-mini-map-close",o.addEventListener("click",this.hide),i.appendChild(o),this.miniMapContainer=i}removeMiniMap(){this.container.removeChild(this.miniMapContainer)}getBounds(t){let e=0,i=this.miniMapWidth,s=0,o=this.miniMapHeight;const{nodes:n}=t;return n&&n.length>0&&n.forEach((({x:t,y:n,width:r=200,height:a=200})=>{const l=t-r/2,h=t+r/2,d=n-a/2,c=n+a/2;e=l<e?l:e,i=h>i?h:i,s=d<s?d:s,o=c>o?c:o})),{left:e,top:s,bottom:o,right:i}}resetData(t){const{nodes:e,edges:i}=t;let s=0,o=0;return e&&e.length>0&&(e.forEach((({x:t,y:e,width:i=200,height:n=200})=>{const r=t-i/2,a=e-n/2;s=r<s?r:s,o=a<o?a:o})),(s<0||o<0)&&(this.resetDataX=s,this.resetDataY=o,e.forEach((t=>{t.x=t.x-s,t.y=t.y-o,t.text&&(t.text.x=t.text.x-s,t.text.y=t.text.y-o)})),i.forEach((t=>{t.startPoint&&(t.startPoint.x=t.startPoint.x-s,t.startPoint.y=t.startPoint.y-o),t.endPoint&&(t.endPoint.x=t.endPoint.x-s,t.endPoint.y=t.endPoint.y-o),t.text&&(t.text.x=t.text.x-s,t.text.y=t.text.y-o),t.pointsList&&t.pointsList.forEach((t=>{t.x=t.x-s,t.y=t.y-o}))})))),t}setView(){const t=this.lf.getGraphRawData(),e=this.resetData(t),{viewMap:i}=this.lf,{modelMap:s}=this.lf.graphModel,{viewMap:o}=this.lfMap;for(const u of i.keys())o.has(u)||(this.lfMap.setView(u,i.get(u)),this.lfMap.graphModel.modelMap.set(u,s.get(u)));this.lfMap.render(e);const{left:n,top:r,right:a,bottom:l}=this.getBounds(e),h=this.width/(a-n),d=this.height/(l-r),c=this.miniMapWrap.firstChild.style,p=Math.min(h,d);c.transform=`matrix(${p}, 0, 0, ${p}, 0, 0)`,c.transformOrigin="left top",c.height=l-Math.min(r,0)+"px",c.width=a-Math.min(n,0)+"px",this.viewPortScale=p,this.setViewPort(p,{left:n,top:r,right:a,bottom:l})}setViewPort(t,{left:e,right:i}){const s=this.viewport.style;s.width=`${this.viewPortWidth}px`,s.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";const{TRANSLATE_X:o,TRANSLATE_Y:n,SCALE_X:r,SCALE_Y:a}=this.lf.getTransform(),l=i-e,h=this.width/(l/this.lf.graphModel.width),d=this.width*(h/this.width),c=d/(this.lf.graphModel.width/this.lf.graphModel.height),p=this.lf.getGraphRawData(),{left:u,top:g}=this.getBounds(p);let m=u,v=g;m+=o/r,v+=n/a,this.viewPortTop=v>0?0:-v*t,this.viewPortLeft=m>0?0:-m*t,this.viewPortWidth=d,this.viewPortHeight=c,s.top=`${this.viewPortTop}px`,s.left=`${this.viewPortLeft}px`,s.width=d/r+"px",s.height=c/a+"px"}createViewPort(){const t=document.createElement("div");t.className="lf-minimap-viewport",t.addEventListener("mousedown",this.startDrag),this.viewport=t}};let ye=fe;a(ye,"pluginName","miniMap"),a(ye,"width",150),a(ye,"height",220),a(ye,"viewPortWidth",150),a(ye,"viewPortHeight",75),a(ye,"isShowHeader",!0),a(ye,"isShowCloseIcon",!0),a(ye,"leftPosition",0),a(ye,"topPosition",0),a(ye,"rightPosition",null),a(ye,"bottomPosition",null),a(ye,"headerTitle","导航");const xe={snapline:!0,stopScrollGraph:!1,background:{backgroundColor:"#F5F5F5"},keyboard:{enabled:!0},adjustEdgeMiddle:!0,plugins:[se,V,le,_,ae,ye],pluginsOptions:{MiniMap:{width:240,disabledPlugins:["BpmnElement","menu","edgeMenu","layout","startAnchorMenu","snapshot"],plugins:[we]}}},Me={[et.Start]:{name:"开始",icon:"icon-start"},[et.UserTask]:{name:"用户任务",icon:"icon-user"},[et.ServiceTask]:{name:"系统任务",icon:"icon-service"},[et.ScriptTask]:{name:"数据处理",icon:"icon-db"},[et.ExclusiveGateway]:{name:"条件判断",icon:"icon-condition"},[et.End]:{name:"结束",icon:"icon-stop"},[et.Flow]:{}},Ce="panel-icon-border",Se=`<svg width="46" height="45" viewBox="0 0 46 45" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="23.0001" cy="22.6" r="21.9" class=${Ce} />\n<path xmlns="http://www.w3.org/2000/svg" d="M31.9173 25.0538L20.8097 32.5805C19.686 33.3421 18.1657 33.0374 17.4144 31.904C17.1441 31.4963 17 31.0169 17 30.5263V15.473C17 14.1066 18.097 13 19.4467 13C19.932 13 20.4063 13.1456 20.8097 13.4189L31.9151 20.9455C33.0387 21.7072 33.3379 23.2438 32.5844 24.3773C32.4115 24.6439 32.1832 24.8746 31.9173 25.0538Z" fill="black" fill-opacity="0.65"/>\n</svg>\n`,Pe=`\n<svg width="84" height="42" viewBox="0 0 84 42" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15.4443 0.5H68.5557C71.3965 0.5 73.9935 2.10502 75.2639 4.6459L81.7639 17.6459C82.8197 19.7574 82.8197 22.2426 81.7639 24.3541L75.2639 37.3541C73.9935 39.895 71.3965 41.5 68.5557 41.5H15.4443C12.6035 41.5 10.0065 39.895 8.73607 37.3541L2.23607 24.3541C1.18034 22.2426 1.18034 19.7574 2.23607 17.6459L8.73607 4.6459C10.0065 2.10502 12.6035 0.5 15.4443 0.5Z" class=${Ce} />\n<path d="M48 15C48 13.4087 47.3679 11.8826 46.2426 10.7574C45.1174 9.63214 43.5913 9 42 9C40.4087 9 38.8826 9.63214 37.7574 10.7574C36.6321 11.8826 36 13.4087 36 15V17.4C36 18.9913 36.6321 20.5174 37.7574 21.6426C38.8826 22.7679 40.4087 23.4 42 23.4C43.5913 23.4 45.1174 22.7679 46.2426 21.6426C47.3679 20.5174 48 18.9913 48 17.4V15ZM54 29.016C50.3538 26.9041 46.2137 25.7945 42 25.8C37.632 25.8 33.528 26.964 30 29.016V33H54V29.016Z" fill="black" fill-opacity="0.65" />\n</svg>\n`,Ee=`\n<svg width="84" height="42" viewBox="0 0 84 42" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15.4443 0.5H68.5557C71.3965 0.5 73.9935 2.10502 75.2639 4.6459L81.7639 17.6459C82.8197 19.7574 82.8197 22.2426 81.7639 24.3541L75.2639 37.3541C73.9935 39.895 71.3965 41.5 68.5557 41.5H15.4443C12.6035 41.5 10.0065 39.895 8.73607 37.3541L2.23607 24.3541C1.18034 22.2426 1.18034 19.7574 2.23607 17.6459L8.73607 4.6459C10.0065 2.10502 12.6035 0.5 15.4443 0.5Z" class=${Ce} />\n<g clip-path="url(#clip0_1347_41946)">\n<path d="M53.6022 19.6876C52.4997 17.8501 50.6622 16.7476 48.3522 16.5901C48.1947 15.1201 47.5122 13.8076 46.4622 12.8101C45.2547 11.7601 43.7847 11.1826 42.2097 11.2351C39.3747 11.2351 36.2772 13.0726 35.8047 16.5901C33.4422 16.6951 31.4997 17.7451 30.3972 19.5826C29.7672 20.6326 29.4522 21.7876 29.3997 22.9951C29.3472 24.2026 29.6622 25.4101 30.2397 26.4601C31.3422 28.5076 33.4422 29.7151 35.9622 29.7151H38.7447V27.6151H35.9622C34.1772 27.6151 32.8122 26.8276 32.0247 25.4626C31.6572 24.7276 31.4472 23.8876 31.4472 23.1001C31.4472 22.2601 31.7097 21.4726 32.1297 20.7376C33.0222 19.3201 34.5972 18.5851 36.6447 18.6901L37.7472 18.7426V17.6401C37.7472 16.2751 38.2197 15.1201 39.1647 14.3851C39.9522 13.7026 41.0547 13.3351 42.1572 13.3351C43.0497 13.3351 43.8897 13.5451 44.6247 14.0701C44.7822 14.1751 44.9397 14.2801 45.0447 14.3851C45.1497 14.4901 45.3072 14.6476 45.4122 14.7526C45.9897 15.4876 46.3047 16.4851 46.3047 17.6401V18.7426L47.3547 18.6901C49.3497 18.6376 50.9247 19.3726 51.7647 20.7901C52.1847 21.5251 52.3947 22.3651 52.4472 23.2051C52.4472 24.0451 52.2897 24.8851 51.8697 25.6201C51.1872 26.8801 49.8747 27.6151 48.2997 27.6151H43.9422V26.1451L40.6347 28.6651L43.9422 31.1851V29.7151H48.2997C50.6097 29.7151 52.6047 28.6126 53.6547 26.6701C54.2322 25.6201 54.4947 24.4126 54.4947 23.2051C54.5472 21.9451 54.2322 20.7376 53.6022 19.6876Z" fill="black" fill-opacity="0.65"/>\n</g>\n<defs>\n<clipPath id="clip0_1347_41946">\n<rect width="25.2" height="25.2" fill="white" transform="translate(29.3999 8.39999)"/>\n</clipPath>\n</defs>\n</svg>\n`,ke=`<svg width="54" height="54" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M23.7658 1.83963C25.5519 0.0534571 28.4479 0.0534571 30.2341 1.83963L51.7603 23.3659C53.5464 25.152 53.5464 28.048 51.7603 29.8342L30.2341 51.3604C28.4479 53.1465 25.5519 53.1465 23.7658 51.3604L2.23953 29.8342C0.453359 28.048 0.453359 25.152 2.23953 23.3659L23.7658 1.83963Z" class=${Ce} />\n<path d="M30.6171 24.2898H37.8481C38.0702 24.2898 38.2502 24.1098 38.2502 23.8876V16.6539C38.2502 16.4317 38.0702 16.2517 37.8481 16.2517H30.6171C30.3949 16.2517 30.2149 16.4317 30.2149 16.6539V19.2667H26.3984C26.2887 19.2667 26.1987 19.3567 26.1987 19.4664V25.6961H23.7884V22.982C23.7884 22.7598 23.6084 22.5798 23.3862 22.5798H16.1524C15.9302 22.5798 15.7502 22.7598 15.7502 22.982V30.2158C15.7502 30.438 15.9302 30.618 16.1524 30.618H23.3834C23.6056 30.618 23.7856 30.438 23.7856 30.2158V27.5017H26.1959V33.7314C26.1959 33.8411 26.2859 33.9311 26.3956 33.9311H30.2121V36.5439C30.2121 36.7661 30.3921 36.9461 30.6143 36.9461H37.8452C38.0674 36.9461 38.2474 36.7661 38.2474 36.5439V29.3158C38.2474 29.0936 38.0674 28.9136 37.8452 28.9136H30.6171C30.3949 28.9136 30.2149 29.0936 30.2149 29.3158V32.1283H28.0043V21.0751H30.2149V23.8876C30.2149 24.1098 30.3949 24.2898 30.6171 24.2898ZM32.1218 18.1614H36.3406V22.383H32.1218V18.1614ZM21.8787 28.7111H17.6599V24.4923H21.8787V28.7111ZM32.1218 30.8233H36.3406V35.0448H32.1218V30.8233Z" fill="black" fill-opacity="0.65"/>\n</svg>`,be=`<svg width="46" height="45" viewBox="0 0 46 45" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="23.0001" cy="22.6" r="21.9" class=${Ce} />\n<rect x="16" y="15.6" width="14" height="14" rx="1" fill="black" fill-opacity="0.65"/>\n</svg>\n`,Le=`<svg width="84" height="43" viewBox="0 0 84 43" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M21 41.7C9.67816 41.7 0.5 32.5219 0.5 21.2C0.5 9.87817 9.67816 0.700012 21 0.700012H63C74.3218 0.700012 83.5 9.87817 83.5 21.2C83.5 32.5219 74.3218 41.7 63 41.7H21Z"  class=${Ce} />\n<g clip-path="url(#clip0_1347_41956)">\n<path d="M50.9994 8.60001H32.9994C32.5016 8.60001 32.0994 9.00219 32.0994 9.50001V32.9C32.0994 33.3978 32.5016 33.8 32.9994 33.8H50.9994C51.4972 33.8 51.8994 33.3978 51.8994 32.9V9.50001C51.8994 9.00219 51.4972 8.60001 50.9994 8.60001ZM34.1244 10.625H49.8744V16.475H34.1244V10.625ZM49.8744 24.125H34.1244V18.275H49.8744V24.125ZM49.8744 31.775H34.1244V25.925H49.8744V31.775ZM41.5494 12.65H36.3744C36.2506 12.65 36.1494 12.7513 36.1494 12.875V14.225C36.1494 14.3488 36.2506 14.45 36.3744 14.45H41.5494C41.6731 14.45 41.7744 14.3488 41.7744 14.225V12.875C41.7744 12.7513 41.6731 12.65 41.5494 12.65ZM36.3744 22.1H41.5494C41.6731 22.1 41.7744 21.9988 41.7744 21.875V20.525C41.7744 20.4013 41.6731 20.3 41.5494 20.3H36.3744C36.2506 20.3 36.1494 20.4013 36.1494 20.525V21.875C36.1494 21.9988 36.2506 22.1 36.3744 22.1ZM45.5994 28.9625C45.5994 29.2609 45.7179 29.547 45.9289 29.758C46.1398 29.969 46.426 30.0875 46.7244 30.0875C47.0227 30.0875 47.3089 29.969 47.5199 29.758C47.7308 29.547 47.8494 29.2609 47.8494 28.9625C47.8494 28.6641 47.7308 28.378 47.5199 28.167C47.3089 27.956 47.0227 27.8375 46.7244 27.8375C46.426 27.8375 46.1398 27.956 45.9289 28.167C45.7179 28.378 45.5994 28.6641 45.5994 28.9625Z" fill="black" fill-opacity="0.65"/>\n</g>\n<defs>\n<clipPath id="clip0_1347_41956">\n<rect width="25.2" height="25.2" fill="white" transform="translate(29.3999 8.60001)"/>\n</clipPath>\n</defs>\n</svg>`,De=[{type:et.Start,text:"开始",icon:Se},{type:et.UserTask,text:"用户任务",icon:Pe},{type:et.ServiceTask,text:"系统任务",icon:Ee},{type:et.ExclusiveGateway,text:"条件判断",icon:ke},{type:et.ScriptTask,text:"数据处理",icon:Le},{type:et.End,text:"结束",icon:be}],Te={class:"node-panel"},Ne=["onMousedown"],$e=["innerHTML"],He={class:"node-text"};const Ae=Y({props:{lf:O},data:()=>({nodeList:De}),methods:{drageNode(t){var e;null==(e=this.lf)||e.dnd.startDrag({type:t.type,text:"",properties:{...Me[t.type],description:"节点内容..."}})}}},[["render",function(t,e,i,s,o,n){return h(),f("div",Te,[(h(!0),f(y,null,x(o.nodeList,(t=>(h(),f("div",{key:t.text,class:"node-item",onMousedown:e=>n.drageNode(t)},[S("div",{class:"node-item-icon",innerHTML:t.icon},null,8,$e),S("div",He,P(t.text),1)],40,Ne)))),128))])}],["__scopeId","data-v-044da661"]]),Ie=G("graph",{state:()=>({modal:!1,nodeType:"",targetModel:{},targetId:null,editMode:"add",lfInstance:null,change:!1}),getters:{nodes:t=>{var e;return null==(e=t.lfInstance)?void 0:e.getGraphRawData().nodes},apiNames:t=>{var e;return null==(e=t.lfInstance)?void 0:e.getGraphRawData().nodes.filter((({type:t})=>t===et.ServiceTask)).map((({properties:t})=>null==t?void 0:t.name))}},actions:{editModel(t,e,i){(null==i?void 0:i.type)!==et.Start&&this.$patch({targetId:e,modal:!0,nodeType:null==i?void 0:i.type,targetModel:null==i?void 0:i.properties,editMode:t})},saveModel(t,e){var i;null==(i=this.lfInstance)||i.setProperties(t,e),this.modal=!1,this.resetTarget(),this.change=!0},closeModal(){var t;"add"===this.editMode&&(null==(t=this.lfInstance)||t.deleteElement(this.targetId)),this.modal=!1,this.resetTarget()},resetTarget(){this.$patch({targetId:null,nodeType:"",targetModel:null})},initLF(t){this.lfInstance=t},saveGraph(){this.change=!1}}}),Ve={class:"home"},_e={class:"home-pannel"},Oe=S("div",{id:"container"},null,-1),Ge=[{path:"/",redirect:"/modeler"},{path:"/modeler",component:l({__name:"Modeler",setup(t){const e=Ie(),i=R();W((()=>{i.value=new O({...xe,container:document.querySelector("#container")}),e.initLF(i.value),(t=>{const e=[{text:"复制",callback(e){t.cloneNode(e.id)}},{text:"删除",callback(e){t.deleteNode(e.id)}}];t.setMenuConfig({nodeMenu:[],edgeMenu:[],graphMenu:[]}),t.setMenuByType({type:et.Start,menu:e}),t.setMenuByType({type:et.End,menu:e}),t.setEdgeMenuItems([{icon:"/assets/remove-a49d32e0.svg",callback(e){t.deleteEdge(e.id)}}])})(i.value),s(),((t={})=>{const e=F(i.value);null==e||e.render(t)})(),i.value.extension.miniMap.show(0,0)}));const s=()=>{i.value&&(i.value.on("node:dbclick",(()=>{var t;null==(t=i.value)||t.graphModel.textEditElement.setElementState(1)})),i.value.on("custom:node-edit",(t=>{var s;e.editModel("update",t.id,t),null==(s=i.value)||s.graphModel.textEditElement.setElementState(1)})),i.value.on("edge:dbclick",(({event:t})=>{var e;null==t||t.preventDefault(),null==(e=i.value)||e.graphModel.textEditElement.setElementState(1)})),i.value.on("node:dnd-add",(({data:t})=>{e.editModel("add",t.id,t)})),i.value.on("connection:not-allowed",(({msg:t})=>{t&&Z.warning(t)})))};return(t,e)=>{const s=Ae,o=J;return h(),f("div",Ve,[S("div",_e,[g(s,{lf:i.value},null,8,["lf"])]),g(o,{lf:i.value},null,8,["lf"]),Oe])}}})}],Re=j({history:B("/"),routes:Ge}),We=H(z);We.component("Icon",X);const Ze=K();We.use(Re),We.use(Ze),We.mount("#app");
